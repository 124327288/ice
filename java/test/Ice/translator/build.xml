<!--
 **********************************************************************

 Copyright (c) 2003-2004 ZeroC, Inc. All rights reserved.

 This copy of Ice is licensed to you under the terms described in the
 ICE_LICENSE file included in this distribution.

 **********************************************************************
-->

<project name="test_Ice_translator" default="all" basedir=".">

    <!-- set global properties for this build -->
    <property name="top.dir" value="../../.."/>
    <property name="lib.dir" value="${top.dir}/lib"/>
    <property name="class.dir" value="classes"/>
    <property name="generated.dir" value="generated"/>

    <!-- set common build properties for this build -->
    <property file="${top.dir}/config/build.properties"/>

    <!-- install slice2java task -->
    <taskdef name="slice2java" classpath="${top.dir}/ant" classname="Slice2JavaTask" />

    <target name="init">
        <!-- Create the time stamp -->
        <tstamp/>
    </target>

    <target name="generate" depends="init">
        <!-- Create the output directory for generated code -->
        <mkdir dir="${generated.dir}"/>
        <slice2java outputdir="${generated.dir}" tie="on">
            <includepath>
                <pathelement path="." />
            </includepath>
            <fileset dir="." includes="DoubleModuleNoPackage.ice"/>
            <fileset dir="." includes="DoubleModuleWithPackage.ice"/>
            <fileset dir="." includes="NoModuleNoPackage.ice"/>
            <fileset dir="." includes="NoModuleWithPackage.ice"/>
            <fileset dir="." includes="SingleModuleNoPackage.ice"/>
            <fileset dir="." includes="SingleModuleWithPackage.ice"/>
            <fileset dir="." includes="TestNoModuleNoPackage.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage1.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage2.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage3.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage4.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage5.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage6.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage7.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage8.ice"/>
            <fileset dir="." includes="TestNoModuleWithPackage9.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage1.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage2.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage3.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage4.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage5.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage6.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage7.ice"/>
            <fileset dir="." includes="TestSingleModuleNoPackage8.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage1.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage2.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage3.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage4.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage5.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage6.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage7.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage8.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage9.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage10.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage11.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage12.ice"/>
            <fileset dir="." includes="TestSingleModuleWithPackage13.ice"/>
        </slice2java>
        <!-- We use 2 tasks to limit the size of the slice2java command line -->
        <slice2java outputdir="${generated.dir}" tie="on">
            <includepath>
                <pathelement path="." />
            </includepath>
            <fileset dir="." includes="TestDoubleModuleNoPackage1.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage2.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage3.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage4.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage5.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage6.ice"/>
            <fileset dir="." includes="TestDoubleModuleNoPackage7.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage1.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage2.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage3.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage4.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage5.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage6.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage7.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage8.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage9.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage10.ice"/>
            <fileset dir="." includes="TestDoubleModuleWithPackage11.ice"/>
        </slice2java>
    </target>

    <target name="compile" depends="generate">
        <mkdir dir="${class.dir}"/>
        <javac srcdir="${generated.dir}" destdir="${class.dir}" source="1.4" classpath="${lib.dir}:${class_dir}" debug="${debug}"/>
        <!--javac srcdir="." destdir="${class.dir}" source="1.4" classpath="${lib.dir}" excludes="generated/**"
            debug="${debug}"/-->
    </target>

    <target name="all" depends="compile"/>

    <target name="clean">
        <delete dir="${generated.dir}"/>
        <delete dir="${class.dir}"/>
    </target>

</project>
