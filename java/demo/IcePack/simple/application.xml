<!--
 **********************************************************************

 Copyright (c) 2003-2005 ZeroC, Inc. All rights reserved.

 This copy of Ice is licensed to you under the terms described in the
 ICE_LICENSE file included in this distribution.

 **********************************************************************
-->

<icepack>

  <application name="Simple">

     <node name="node">

       <!-- First, we deploy the regular server --> 
       <server name="Server" kind="java" classname="Server" activation="on-demand">
 
         <adapters>
           <adapter name="Hello" endpoints="tcp:udp" register="true">
             <object identity="hello1" type="::Demo::Hello"/>
           </adapter>
         </adapters>
  
         <properties>
	   <property name="Identity" value="hello1"/>
         </properties>
       </server>
 
       <!-- Then, we deploy the IceBox server which will instantiate the HelloService service -->
       <server name="IceBox" kind="java-icebox" endpoints="default" activation="on-demand">

         <service name="Hello" entry="HelloServiceI">
           <adapters>
             <adapter name="Hello" endpoints="tcp:udp">
               <object identity="hello2" type="::Demo::Hello"/>
             </adapter>
           </adapters>

           <properties>
             <property name="Identity" value="hello2"/>
           </properties>    
         </service>

         <properties>
           <property name="IceBox.UseSharedCommunicator.Hello" value="1"/>
         </properties>
 
       </server>

     </node>

  </application>

</icepack>
