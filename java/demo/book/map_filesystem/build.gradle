// **********************************************************************
//
// Copyright (c) 2003-2014 ZeroC, Inc. All rights reserved.
//
// This copy of Ice is licensed to you under the terms described in the
// ICE_LICENSE file included in this distribution.
//
// **********************************************************************

slice {
	java {
		include = ["${projectDir}", "${sliceDir}"]
		srcDir = '.'
	}
	freezej {
		files = [file("FilesystemDB.ice"),
				 file("${sliceDir}/Ice/Identity.ice")]
		include = ["${projectDir}", "${sliceDir}"]
		args = "--ice"
		dict {
			IdentityFileEntryMap {
				javaType = "FilesystemDB.IdentityFileEntryMap"
				key = "Ice::Identity"
				value = "FilesystemDB::FileEntry"
			}
		}
		dict {
			IdentityDirectoryEntryMap {
				javaType = "FilesystemDB.IdentityDirectoryEntryMap"
				key="Ice::Identity"
                value="FilesystemDB::DirectoryEntry"
			}
		}
	}
}

sourceSets {
	main {
		java {
			srcDir '.'
			output.classesDir "${buildDir}/classes"
		}
	}
}

jar.enabled = false

if (distJarDir == null) {
	dependencies {
		compile project(':src/Ice')
		compile project(':src/Freeze')
	}
} else {
	dependencies {
		compile files("${distJarDir}/Ice.jar")
		compile files("${distJarDir}/Freeze.jar")
		compile 'com.sleepycat:db:5.3.28'
	}
}

idea.module {
	excludeDirs -= file(buildDir)
	buildDir.listFiles({d, f ->f != 'generated-src'} as FilenameFilter).each { excludeDirs += it }
}
