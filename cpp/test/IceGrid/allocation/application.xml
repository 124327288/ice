<icegrid>

  <application name="test" import-default-templates="true">

    <node name="localnode">

      <server id="ObjectAllocation" exe="${test.dir}/server" activation="on-demand" pwd=".">
        <adapter name="Server" endpoints="default">
  	  <object identity="nonallocatable" type="::Test" allocatable="false"/>
  	  <object identity="allocatable" type="::Test" allocatable="true"/>
  	  <object identity="allocatablebis" type="::TestBis" allocatable="true"/>
        </adapter>
      </server>

      <server id="AdapterAllocation" exe="${test.dir}/server" activation="on-demand" pwd=".">
        <adapter name="Server" endpoints="default" allocatable="true" id="AdapterAlloc">
  	  <object identity="allocatable1" type="::TestAdapter1"/>
  	  <object identity="allocatable2" type="::TestAdapter2"/>

  	  <object identity="allocatable11" type="::TestMultipleByAdapter"/>
  	  <object identity="allocatable21" type="::TestMultipleByAdapter"/>
        </adapter>
      </server>

      <server id="ServerAllocation" exe="${test.dir}/server" activation="on-demand" pwd="." allocatable="true">
        <adapter name="Server" endpoints="default" id="ServerAlloc">
  	  <object identity="allocatable3" type="::TestServer1"/>
  	  <object identity="allocatable4" type="::TestServer2"/>

  	  <object identity="allocatable31" type="::TestMultipleByServer"/>
  	  <object identity="allocatable41" type="::TestMultipleByServer"/>
        </adapter>
      </server>

      <server id="ServerAllocation-1" exe="${test.dir}/server" activation="on-demand" pwd="." allocatable="true">
        <adapter name="Server" endpoints="default">
  	  <object identity="allocatable5" type="::TestMultipleServer"/>
        </adapter>
      </server>

      <server id="ServerAllocation-2" exe="${test.dir}/server" activation="on-demand" pwd="." allocatable="true">
        <adapter name="Server" endpoints="default">
  	  <object identity="allocatable6" type="::TestMultipleServer"/>
        </adapter>
      </server>
      
      <server id="ServerStress-1" exe="${test.dir}/server" activation="on-demand" pwd=".">
        <adapter name="Server" endpoints="default">
  	  <object identity="stress-1" type="::StressTest" allocatable="true"/>
  	  <object identity="stress-2" type="::StressTest" allocatable="true"/>
        </adapter>
      </server>

      <server id="ServerStress-2" exe="${test.dir}/server" activation="on-demand" pwd=".">
        <adapter name="Server" endpoints="default" allocatable="true">
  	  <object identity="stress-3" type="::StressTest"/>
  	  <object identity="stress-4" type="::StressTest"/>
        </adapter>
      </server>

      <server id="ServerStress-3" exe="${test.dir}/server" activation="on-demand" pwd="." allocatable="true">
        <adapter name="Server" endpoints="default">
  	  <object identity="stress-5" type="::StressTest"/>
  	  <object identity="stress-6" type="::StressTest"/>
        </adapter>
      </server>

    </node>

  </application>

</icegrid>
