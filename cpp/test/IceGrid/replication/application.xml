<icegrid>

  <application name="Test">

    <server-template id="IceGridNode">
      <parameter name="id"/>
      <server id="${id}" exe="${ice.dir}/bin/icegridnode" activation="manual">
        <option>--nowarn</option>
        <adapter name="IceGrid.Node" endpoints="default" register-process="true" wait-for-activation="false"/>
        <dbenv name="data"/>
        <property name="IceGrid.InstanceName" value="TestIceGrid"/>
        <property name="IceGrid.Node.Name" value="${server}"/>
        <property name="IceGrid.Node.Data" value="${node.datadir}/servers/${server}/dbs/data"/>
        <property name="IceGrid.Node.PropertiesOverride"
                  value="${properties-override} Ice.ServerIdleTime=0 Ice.PrintProcessId=0 Ice.PrintAdapterReady=0"/>
        <property name="Ice.Default.Locator" value="TestIceGrid/Locator:default -p 12050"/>
      </server>
    </server-template>

    <server-template id="IceGridRegistry">
      <parameter name="id"/>
      <parameter name="port"/>
      <server id="${id}" exe="${ice.dir}/bin/icegridregistry" activation="manual">
        <option>--nowarn</option>
        <dbenv name="data"/>
        <property name="IceGrid.InstanceName" value="TestIceGrid"/>
        <property name="IceGrid.Registry.Client.Endpoints" value="default -h 127.0.0.1 -p ${port}"/>
        <property name="IceGrid.Registry.Server.Endpoints" value="default"/>
        <property name="IceGrid.Registry.Internal.Endpoints" value="default"/>
        <property name="IceGrid.Registry.SessionManager.Endpoints" value="default"/>
        <property name="IceGrid.Registry.ReplicaName" value="${server}"/>
        <property name="IceGrid.Registry.Data" value="${node.datadir}/servers/${server}/dbs/data"/>
        <property name="IceGrid.Registry.AdminPermissionsVerifier" value="TestIceGrid/NullPermissionsVerifier"/>
        <property name="IceGrid.Registry.SessionTimeout" value="0"/>
	<property name="IceGrid.Registry.DynamicRegistration" value="1"/>
        <property name="Ice.Default.Locator" value="TestIceGrid/Locator:default -p 12050"/>
        <property name="IceGrid.Registry.Trace.Replica" value="3"/> 
      </server>
    </server-template>

  </application>

</icegrid>
