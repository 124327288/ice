# **********************************************************************
#
# Copyright (c) 2001
# MutableRealms, Inc.
# Huntsville, AL, USA
#
# All Rights Reserved
#
# **********************************************************************

#
# Don't change these lines!
#
SHELL		= /bin/sh
VERSION		= 0.0.1
bindir		= $(top_srcdir)/bin
libdir		= $(top_srcdir)/lib
includedir	= $(top_srcdir)/include
slicedir	= $(top_srcdir)/slice

#
# The locations of STLport, JThreads/C++, and Berkeley DB.
#
# The values below can be overwritten by defining them as environment
# variables. For example, if you are using a bourne shell or
# compatible, you can overwrite the location of STLPORT like this:
#
# export STLPORT=/usr/local/STLport-4.5
#
STLPORT		?= /opt/STLport
JTC		?= /opt/JTC
DB		?= /opt/db

#
# Experts only: You can change the following lines, for example, to
# set different compilation options for debug or optimization
#
CXX		= c++
CXXFLAGS	= -g -ftemplate-depth-128 -fPIC -Wall
#CXXFLAGS	= -O -DNDEBUG -ftemplate-depth-128 -fPIC -Wall
CPPFLAGS	= -I$(includedir) -I$(STLPORT)/include/stlport -I$(JTC)/include
LDFLAGS		= -L$(libdir) -L$(STLPORT)/lib -L$(JTC)/lib
BASELIBS	= -lIceUtil -lstlport_gcc -lJTC -lpthread
LIBS		= -lIce $(BASELIBS)

#
# Don't change anything below this line!
#

SLICE2CPP	= $(bindir)/slice2cpp
SLICE2FREEZE	= $(bindir)/slice2freeze
SLICE2DOCBOOK	= $(bindir)/slice2docbook

EVERYTHING	= all depend clean

.SUFFIXES:
.SUFFIXES:	.cpp .o

.cpp.o:
	$(CXX) -c $(CPPFLAGS) $(CXXFLAGS) $<

all:: $(SRCS) $(TARGETS)

depend:: $(SRCS)
	if test -n "$(SRCS)" ; then \
	    $(CXX) -DMAKEDEPEND -M $(CXXFLAGS) $(CPPFLAGS) $(SRCS) | \
	    $(top_srcdir)/config/makedepend.py > .depend; \
	fi

clean::
	-rm -f $(TARGETS)
	-rm -f core *.o *.bak
