*** Zend/zend_exceptions.h	2004-04-28 10:59:12.000000000 -0700
--- Zend/zend_exceptions.h	2004-04-28 10:59:18.000000000 -0700
***************
*** 40,46 ****
  ZEND_API void zend_throw_exception_object(zval *exception TSRMLS_DC);
  ZEND_API void zend_clear_exception(TSRMLS_D);
  
! ZEND_API void (*zend_throw_exception_hook)(zval *ex TSRMLS_DC);
  
  /* show an exception using zend_error(E_ERROR,...) */
  ZEND_API void zend_exception_error(zval *exception TSRMLS_DC);
--- 40,46 ----
  ZEND_API void zend_throw_exception_object(zval *exception TSRMLS_DC);
  ZEND_API void zend_clear_exception(TSRMLS_D);
  
! extern ZEND_API void (*zend_throw_exception_hook)(zval *ex TSRMLS_DC);
  
  /* show an exception using zend_error(E_ERROR,...) */
  ZEND_API void zend_exception_error(zval *exception TSRMLS_DC);

*** ext/standard/proc_open.c	Mon Apr 19 11:07:30 2004
--- ext/standard/proc_open.c	Tue May 18 19:47:48 2004
***************
*** 54,62 ****
  
  
  #if HAVE_PTSNAME && HAVE_GRANTPT && HAVE_UNLOCKPT && HAVE_SYS_IOCTL_H && HAVE_TERMIOS_H
- # define PHP_CAN_DO_PTS	1
  # include <sys/ioctl.h>
  # include <termios.h>
  #endif
  
  #include "proc_open.h"
--- 54,64 ----
  
  
  #if HAVE_PTSNAME && HAVE_GRANTPT && HAVE_UNLOCKPT && HAVE_SYS_IOCTL_H && HAVE_TERMIOS_H
  # include <sys/ioctl.h>
  # include <termios.h>
+ # ifdef TIOCNOTTY
+ #  define PHP_CAN_DO_PTS    1
+ # endif
  #endif
  
  #include "proc_open.h"
